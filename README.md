# گزارش آزمایش اصول SOLID در سیستم رزرو هتل

---

## گام اول (افزودن دو قابلیت جدید)

### تغییرات مربوط به افزودن روش جدید پرداخت (پرداخت حضوری)

| ردیف | کلاس تغییر یافته   | توضیح کوتاه در مورد تغییر                                      |
|------|--------------------|----------------------------------------------------------------|
| ۱    | PaymentProcessor   | یک تابع void به method های این کلاس برای پرداخت حضوری اضافه شد |
| ۲    | ReservationService | به switch روش پرداخت یک گزینه جدید اضافه شد                    |

### تغییرات مربوط به افزودن روش جدید ارسال پیام (پیامک)

| ردیف | کلاس تغییر یافته   | توضیح کوتاه در مورد تغییر                               |
|------|--------------------|---------------------------------------------------------|
| ۱    | MessageSender      | تغییر در interface برای اضافه کردن متد جدید             |
| ۲    | EmailSender        | اضافه کردن متد جدید به متدهای کلاس email                |
| ۳    | SmsSender          | اضافه کردن کلاس جدید و پیاده سازی متد نامربوط sendEmail |
| ۴    | ReservationService | اضافه کردن نوع پیام sms به switch مربوط به ارسال پیام   |

---

## گام دوم (تحلیل اصول شی‌گرایی)

### وضعیت اصول SOLID در کد اولیه

| اصل | وضعیت (برقراری/نقض) | علت برقراری / نقض                                                                                                           |
|-----|---------------------|-----------------------------------------------------------------------------------------------------------------------------|
| SRP | نقض                 | کلاس ReservationService همزمان مسئولیت ارسال پیام و پرداخت را با هم به عهده دارد                                            |
| OCP | نقض                 | برای اضافه کردن قابلیت جدید ارسال پیام باید همه کلاس های قبلی که متدهایی رو پیاده سازی کردن رو تغییر بدیم                   |
| OCP | برقراری             | در کلاس PaymentProcessor برای اضافه کردن قابلیت جدید لازم نیست کدهای دیگری را دستکاری کنیم                                  |
| LSP | برقراری             | بعد از اضافه کردن متدهای جدید به کلاس های EmailSender و SmsSender آنها همچنان میتوانند جایگزین interface MessageSender شوند |
| ISP | نقض                 | رابط MessageSender با اضافه کردن قابلیت های جدید بزرگ و بزرگتر میشود                                                        |
| DIP | نقض                 | کلاس ReservationService باید برای پرداخت به یک interface Payment متصل باشد به جای اتصال به خود کلاس                         |
| PLK | نقض                 | کلاس ReservationService از فیلدهای مربوط به آبجکت Reservation زیاد استفاده میکند. میشه به جای اونها توابع ساده تر قرار داد  |
| CRP | ــ                  | سناریو نقض یا برقراری یافت نشد                                                                                              |

---

## گام سوم (اصلاح موارد نقض)

### اصلاحات انجام شده برای رعایت اصول SOLID

1. اضافه کردن interface های Payment و Sender
2. اضافه کردن Handler های مخصوص برای هر یک از interface ها
3. اضافه کردن متدهای مخصوص برای class Reservation
4. اضافه کردن پیاده سازی های جداگانه برای هر یک از پیاده سازی های رابط های اضافه شده

---

## گام چهارم (ارزیابی)

**پاسخ:** اگر اصول SOLID از ابتدا رعایت می‌شد، **6 تغییر از 7 تغییر** گام اول حذف می‌شدند (به جز اضافه کردن کلاس
SmsSender). قابلیت‌های جدید با **تنها 2 تغییر** اضافه می‌شدند: 1) ساخت کلاس جدید OnSitePayment و 2) ساخت کلاس جدید
SmsSender. هیچ تغییری در کدهای موجود لازم نبود.

---

## گام پنجم (نتیجه‌گیری)

**پاسخ:** رعایت اصول SOLID باعث **کاهش وابستگی** بین کلاس‌ها، **سهولت در تست‌گیری** و **افزایش قابلیت توسعه‌پذیری**
می‌شود. این اصول امکان **اضافه کردن قابلیت‌های جدید بدون تغییر کدهای موجود** را فراهم کرده و **نگهداری و رفع باگ** را در
طولانی‌مدت ساده‌تر می‌کند.